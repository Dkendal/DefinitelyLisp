import { A, B, I, M, Union } from :ts-toolbelt

import { __ } from :.

import {
  __capture__,
  __kind__,
  any_,
  bigint_,
  boolean_,
  function_,
  number_,
  object_,
  rest_,
  string_,
  symbol_,
} from :./const

type True as 1

type ExtractSubcapture(T) as
  match T do
    M::Primitive | M::BuiltIn => never,
    object => T[ Exclude(keyof(T), keyof([]) | keyof({})) ],
  end

type PartialAssignment(K, V) as
  match V do
    never => never,
    string =>
        for k in K do
            v
        end,
  end

type EmptyToNever(T) as
  if not ({} <: T) then
    T
  end

type Kind as
  :string
  | :number
  | :bigint
  | :boolean
  | :symbol
  | :object
  | :function
  | :any
  | :rest

export interface Hole(Type, Label)
defaults
  Type = any,
  Label = any
{
  T: Type,
  readonly [__kind__]: Label
}

export type HoleInnerType(T) as
  if T <: Hole(?U) then
    U
  else
    T
  end
